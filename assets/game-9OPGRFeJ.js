var Re=Object.defineProperty;var oe=r=>{throw TypeError(r)};var Ie=(r,t,e)=>t in r?Re(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var G=(r,t,e)=>Ie(r,typeof t!="symbol"?t+"":t,e),Wt=(r,t,e)=>t.has(r)||oe("Cannot "+e);var c=(r,t,e)=>(Wt(r,t,"read from private field"),e?e.call(r):t.get(r)),M=(r,t,e)=>t.has(r)?oe("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,e),Yt=(r,t,e,n)=>(Wt(r,t,"write to private field"),n?n.call(r,e):t.set(r,e),e),k=(r,t,e)=>(Wt(r,t,"access private method"),e);import{i as pe,S as qe,h as P,o as ke,j as Le,k as ze,l as E,n as be,e as p,U as ht,p as ae,m as Ut,g as d,q as jt,u as We,r as Ye,v as _e,w as Ct,x as Ot,y as Gt,E as De,z as Fe,A as Se,I as Ue,B as je,C as yt,D as ne,F as Bt,G as Ge,H as Be,J as Je,K as Ke,L as Ve,M as Xe,N as Ze,d as Qe,O as ut,P as J,Q as vt,R as Jt,a as F,T as lt,V as St,W as At,c as N,s as T,X as $e,Y as se,Z as H,t as Et,b as tr,$ as ce,f as er}from"./this-iB9_KTag.js";let rr=!1;function w(r,t=!0,e=null,n){if(typeof r=="object"&&r!=null&&!pe(r)&&!(qe in r)){if(P in r){const i=r[P];if(i.t===r||i.p===r)return i.p}const s=Ye(r);if(s===ke||s===Le){const i=new Proxy(r,nr);return ze(r,P,{value:{s:new Map,v:E(0),a:be(r),i:t,p:i,t:r},writable:!0,enumerable:!1}),i}}return r}function ue(r,t=1){p(r,r.v+t)}const nr={defineProperty(r,t,e){if(e.value){const n=r[P],s=n.s.get(t);s!==void 0&&p(s,w(e.value,n.i,n))}return Reflect.defineProperty(r,t,e)},deleteProperty(r,t){const e=r[P],n=e.s.get(t),s=e.a,i=delete r[t];if(s&&i){const o=e.s.get("length"),a=r.length-1;o!==void 0&&o.v!==a&&p(o,a)}return n!==void 0&&p(n,ht),i&&ue(e.v),i},get(r,t,e){var i;if(t===P)return Reflect.get(r,P);const n=r[P];let s=n.s.get(t);if(s===void 0&&(!(t in r)||(i=ae(r,t))!=null&&i.writable)&&(s=(n.i?E:Ut)(w(r[t],n.i,n)),n.s.set(t,s)),s!==void 0){const o=d(s);return o===ht?void 0:o}return Reflect.get(r,t,e)},getOwnPropertyDescriptor(r,t){const e=Reflect.getOwnPropertyDescriptor(r,t);if(e&&"value"in e){const s=r[P].s.get(t);s&&(e.value=d(s))}return e},has(r,t){var i;if(t===P)return!0;const e=r[P],n=Reflect.has(r,t);let s=e.s.get(t);return(s!==void 0||jt!==null&&(!n||(i=ae(r,t))!=null&&i.writable))&&(s===void 0&&(s=(e.i?E:Ut)(n?w(r[t],e.i,e):ht),e.s.set(t,s)),d(s)===ht)?!1:n},set(r,t,e,n){const s=r[P];let i=s.s.get(t);i===void 0&&(We(()=>n[t]),i=s.s.get(t)),i!==void 0&&p(i,w(e,s.i,s));const o=s.a,a=!(t in r);if(o&&t==="length")for(let l=e;l<r.length;l+=1){const u=s.s.get(l+"");u!==void 0&&p(u,ht)}if(r[t]=e,a){if(o){const l=s.s.get("length"),u=r.length;l!==void 0&&l.v!==u&&p(l,u)}ue(s.v)}return!0},ownKeys(r){const t=r[P];return d(t.v),Reflect.ownKeys(r)}};function le(r,t,e,n=null,s=!1){var i=null,o=null,a=null,l=s?De:0;_e(()=>{a!==(a=!!t())&&(a?(i?Ct(i):i=Ot(()=>e(r)),o&&Gt(o,()=>{o=null})):(o?Ct(o):n&&(o=Ot(()=>n(r))),i&&Gt(i,()=>{i=null})))},l)}let Dt=null;function xt(r,t){return t}function sr(r,t,e,n){for(var s=[],i=t.length,o=0;o<i;o++)Ge(t[o].e,s,!0);var a=i>0&&s.length===0&&e!==null;if(a){var l=e.parentNode;Be(l),l.append(e),n.clear(),tt(r,t[0].prev,t[i-1].next)}Je(s,()=>{for(var u=0;u<i;u++){var x=t[u];a||(n.delete(x.k),tt(r,x.prev,x.next)),Ke(x.e,!a)}})}function mt(r,t,e,n,s,i=null){var o={flags:t,items:new Map,first:null},a=(t&Se)!==0;if(a){var l=r;r=l.appendChild(Fe())}var u=null;_e(()=>{var x=e(),f=be(x)?x:x==null?[]:Array.from(x),q=f.length,h=o.flags;h&Bt&&!pe(f)&&!(qe in f)&&!(P in f)&&(h^=Bt,h&Xe&&!(h&yt)&&(h^=yt)),ir(f,o,r,s,h,n),i!==null&&(q===0?u?Ct(u):u=Ot(()=>i(r)):u!==null&&Gt(u,()=>{u=null}))})}function ir(r,t,e,n,s,i){var $,y,v,j;var o=(s&Ve)!==0,a=(s&(yt|ne))!==0,l=r.length,u=t.items,x=t.first,f=x,q=new Set,h=null,m=new Set,C=[],_=[],O,S,g,b;if(o)for(b=0;b<l;b+=1)O=r[b],S=i(O,b),g=u.get(S),g!==void 0&&(($=g.a)==null||$.measure(),m.add(g));for(b=0;b<l;b+=1){if(O=r[b],S=i(O,b),g=u.get(S),g===void 0){var ft=f?f.e.nodes.start:e;h=ar(ft,t,h,h===null?t.first:h.next,O,S,b,n,s),u.set(S,h),C=[],_=[],f=h.next;continue}if(a&&or(g,O,b,s),g.e.f&Ue&&(Ct(g.e),o&&((y=g.a)==null||y.unfix(),m.delete(g))),g!==f){if(q.has(g)){if(C.length<_.length){var it=_[0],U;h=it.prev;var Mt=C[0],V=C[C.length-1];for(U=0;U<C.length;U+=1)fe(C[U],it,e);for(U=0;U<_.length;U+=1)q.delete(_[U]);tt(t,Mt.prev,V.next),tt(t,h,Mt),tt(t,V,it),f=it,h=V,b-=1,C=[],_=[]}else q.delete(g),fe(g,f,e),tt(t,g.prev,g.next),tt(t,g,h===null?t.first:h.next),tt(t,h,g),h=g;continue}for(C=[],_=[];f!==null&&f.k!==S;)q.add(f),_.push(f),f=f.next;if(f===null)continue;g=f}C.push(g),h=g,f=g.next}const W=Array.from(q);for(;f!==null;)W.push(f),f=f.next;var X=W.length;if(X>0){var nt=s&Se&&l===0?e:null;if(o){for(b=0;b<X;b+=1)(v=W[b].a)==null||v.measure();for(b=0;b<X;b+=1)(j=W[b].a)==null||j.fix()}sr(t,W,nt,u)}o&&je(()=>{var st;for(g of m)(st=g.a)==null||st.apply()}),jt.first=t.first&&t.first.e,jt.last=h&&h.e}function or(r,t,e,n){n&yt&&p(r.v,t),n&ne?p(r.i,e):r.i=e}function ar(r,t,e,n,s,i,o,a,l){var u=Dt;try{var x=(l&yt)!==0,f=(l&Bt)===0,q=x?f?Ut(s):E(s):s,h=l&ne?E(o):o,m={i:h,v:q,k:i,a:null,e:null,prev:e,next:n};return Dt=m,m.e=Ot(()=>a(r,q,h),rr),m.e.prev=e&&e.e,m.e.next=n&&n.e,e===null?t.first=m:(e.next=m,e.e.next=m.e),n!==null&&(n.prev=m,n.e.prev=m.e),m}finally{Dt=u}}function fe(r,t,e){for(var n=r.next?r.next.e.nodes.start:e,s=t?t.e.nodes.start:e,i=r.e.nodes.start;i!==n;){var o=i.nextSibling;s.before(i),i=o}}function tt(r,t,e){t===null?r.first=e:(t.next=e,t.e.next=e&&e.e),e!==null&&(e.prev=t,e.e.prev=t&&t.e)}function R(r,t,e){e=e==null?null:e+"";var n=r.__attributes??(r.__attributes={});n[t]!==(n[t]=e)&&(t==="loading"&&(r[Ze]=e),e===null?r.removeAttribute(t):r.setAttribute(t,e))}function ot(r,t,e){e?r.classList.add(t):r.classList.remove(t)}const K=r=>Number.isFinite(r)&&!Number.isNaN(r),Ht=r=>typeof r=="object"&&r!==null,cr=r=>typeof r=="function",Pt=r=>Ht(r)&&K(r.col)&&K(r.row),ur=r=>Ht(r)&&K(r.x)&&K(r.y),Kt=r=>Array.isArray(r)&&K(r[0])&&K(r[1]),zt=(r,t)=>t+r*(t&1)>>1,Vt=([r,t,e=-r-t])=>({q:r,r:t,s:e});function Tt({q:r,r:t,s:e}){const n=K(r),s=K(t),i=K(e);if(n&&s&&i)return{q:r,r:t,s:e};if(n&&s)return{q:r,r:t,s:-r-t};if(n&&i)return{q:r,r:-r-e,s:e};if(s&&i)return{q:-t-e,r:t,s:e};throw new TypeError(`Can't determine three cube coordinates from less than two coordinates. Received: { q: ${r}, r: ${t}, s: ${e} }.`)}var D=(r=>(r.FLAT="FLAT",r.POINTY="POINTY",r))(D||{});function lr(r,t){if(Ht(r)&&r.xRadius>0&&r.yRadius>0)return r;if(Ht(r)&&r.width>0&&r.height>0){const{width:e,height:n}=r;return t===D.POINTY?{xRadius:e/Math.sqrt(3),yRadius:n/2}:{xRadius:e/2,yRadius:n/Math.sqrt(3)}}if(r>0)return{xRadius:r,yRadius:r};throw new TypeError(`Invalid dimensions: ${JSON.stringify(r)}. Dimensions must be expressed as an Ellipse ({ xRadius: number, yRadius: number }), a Rectangle ({ width: number, height: number }) or a number.`)}function fr(r,t){if(ur(r))return r;if(!t)throw new TypeError(`Supply a bounding box ({ width: number, height: number }). Received: ${JSON.stringify(t)}`);if(r==="topLeft")return{x:t.width*-.5,y:t.height*-.5};throw new TypeError(`Invalid origin: ${JSON.stringify(r)}. Origin must be expressed as a Point ({ x: number, y: number }) or the string 'topLeft'.`)}class ie{constructor(t=[0,0]){G(this,"q");G(this,"r");const{q:e,r:n}=wt(this,t);this.q=e,this.r=n}static get settings(){const{dimensions:t,orientation:e,origin:n,offset:s}=this.prototype;return{dimensions:t,orientation:e,origin:n,offset:s}}get center(){const{width:t,height:e,x:n,y:s}=this;return{x:t/2-n,y:e/2-s}}get col(){return he(this).col}get corners(){const{orientation:t,width:e,height:n,x:s,y:i}=this;return t===D.POINTY?hr(e,n,s,i):dr(e,n,s,i)}get dimensions(){return dt.dimensions}get height(){const{orientation:t,dimensions:{yRadius:e}}=this;return t===D.POINTY?e*2:e*Math.sqrt(3)}get isFlat(){return this.orientation===D.FLAT}get isPointy(){return this.orientation===D.POINTY}get orientation(){return dt.orientation}get origin(){return dt.origin}get offset(){return dt.offset}get row(){return he(this).row}get width(){const{orientation:t,dimensions:{xRadius:e}}=this;return t===D.POINTY?e*Math.sqrt(3):e*2}get x(){return de(this).x}get y(){return de(this).y}get s(){return-this.q-this.r}clone(t=this){return new this.constructor(t)}equals(t){return gr(this,Pt(t)?Oe(this,t):t)}toString(){return`${this.constructor.name}(${this.q},${this.r})`}translate(t){return mr(this,t)}}const dt={dimensions:{xRadius:1,yRadius:1},orientation:D.POINTY,origin:{x:0,y:0},offset:-1},hr=(r,t,e,n)=>[{x:e+r*.5,y:n-t*.25},{x:e+r*.5,y:n+t*.25},{x:e,y:n+t*.5},{x:e-r*.5,y:n+t*.25},{x:e-r*.5,y:n-t*.25},{x:e,y:n-t*.5}],dr=(r,t,e,n)=>[{x:e+r*.25,y:n-t*.5},{x:e+r*.5,y:n},{x:e+r*.25,y:n+t*.5},{x:e-r*.25,y:n+t*.5},{x:e-r*.5,y:n},{x:e-r*.25,y:n-t*.5}];function Ee(r){const{dimensions:t,orientation:e,origin:n,offset:s}={...dt,...r};return class extends ie{get dimensions(){return lr(t,e)}get orientation(){return e}get origin(){return fr(n,this)}get offset(){return s}}}function gr(r,t){if(Pt(r)&&Pt(t))return r.col===t.col&&r.row===t.row;if(Object.hasOwn(r,"col")||Object.hasOwn(t,"col"))throw new Error(`Can't compare coordinates where one are offset coordinates. Either pass two offset coordinates or two axial/cube coordinates. Received: ${JSON.stringify(r)} and ${JSON.stringify(t)}`);const e=Kt(r)?Vt(r):r,n=Kt(t)?Vt(t):t;return e.q===n.q&&e.r===n.r}const yr=(r,t,e)=>({col:r+zt(e,t),row:t}),vr=(r,t,e)=>({col:r,row:t+zt(e,r)}),he=({q:r,r:t,offset:e,isPointy:n})=>n?yr(r,t,e):vr(r,t,e),de=({orientation:r,dimensions:{xRadius:t,yRadius:e},origin:{x:n,y:s},q:i,r:o})=>r===D.POINTY?{x:t*Math.sqrt(3)*(i+o/2)-n,y:e*3/2*o-s}:{x:t*3/2*i-n,y:e*Math.sqrt(3)*(o+i/2)-s},Me=(r,t,e)=>{const n=r-zt(e,t),s=t,i=-n-s;return{q:n,r:s,s:i}},Ce=(r,t,e)=>{const n=r,s=t-zt(e,r),i=-n-s;return{q:n,r:s,s:i}},Oe=({offset:r,orientation:t},{col:e,row:n})=>t===D.POINTY?Me(e,n,r):Ce(e,n,r),Xt=r=>{const{q:t,r:e,s:n}=Tt(r);let s=Math.round(t),i=Math.round(e),o=Math.round(n);const a=Math.abs(t-s),l=Math.abs(e-i),u=Math.abs(n-o);return a>l&&a>u?s=-i-o:l>u?i=-s-o:o=-s-i,{q:s,r:i,s:o}},xr=({dimensions:{xRadius:r,yRadius:t},origin:e,orientation:n},{x:s,y:i})=>(s+=e.x,i+=e.y,n===D.POINTY?Xt({q:Math.sqrt(3)*s/(3*r)-i/(3*t),r:2/3*(i/t)}):Xt({q:2/3*(s/r),r:Math.sqrt(3)*i/(3*t)-s/(3*r)}));function wt(r,t){return Kt(t)?Vt(t):Pt(t)?Oe(r,t):Tt(t)}function mr(r,t){const{q:e,r:n,s}=Tt(r),{q:i,r:o,s:a}=Tt(t),l={q:e+i,r:n+o,s:s+a};return r instanceof ie?r.clone(l):l}function Nt(r,t,e){const{q:n,r:s,s:i}=wt(r,t),{q:o,r:a,s:l}=wt(r,e);return Math.max(Math.abs(n-o),Math.abs(s-a),Math.abs(i-l))}var Zt=(r=>(r.CLOCKWISE="CLOCKWISE",r.COUNTERCLOCKWISE="COUNTERCLOCKWISE",r))(Zt||{}),I=(r=>(r[r.N=0]="N",r[r.NE=1]="NE",r[r.E=2]="E",r[r.SE=3]="SE",r[r.S=4]="S",r[r.SW=5]="SW",r[r.W=6]="W",r[r.NW=7]="NW",r))(I||{});const wr=[null,{q:1,r:-1},{q:1,r:0},{q:0,r:1},null,{q:-1,r:1},{q:-1,r:0},{q:0,r:-1}],pr=[{q:0,r:-1},{q:1,r:-1},null,{q:1,r:0},{q:0,r:1},{q:-1,r:1},null,{q:-1,r:0}],qr=({offset:r,q:t,r:e,col:n,row:s},i)=>{if(i===I.S||i===I.N){const a=i===I.S?s+1:s-1;return Me(n,a,r)}const o=wr[i];return{q:t+o.q,r:e+o.r}},br=({offset:r,q:t,r:e,col:n,row:s},i)=>{if(i===I.E||i===I.W){const a=i===I.E?n+1:n-1;return Ce(a,s,r)}const o=pr[i];return{q:t+o.q,r:e+o.r}},Qt=(r,t)=>r.clone(r.isPointy?qr(r,t):br(r,t));function $t(r){return Array.isArray(r)?function(t,e){const n=[];let s=e;for(const i of r)for(const o of i(t,s))n.push(s=o);return n}:r}function Ae(r){return _r(r)?Sr(r):Er(r)}function _r(r){return r.direction in I}function Sr({start:r,direction:t,length:e}){return function(n,s){const i=[];let o=n(r??s);!r&&s&&(o=Qt(o,t));for(let a=0;a<e;a++)i.push(o),o=Qt(o,t);return i}}function Er({start:r,stop:t}){return function(e,n){const s=[],i=e(r??n),o=ge(i),a=ge(wt(i,t)),l=Mr(o,a),u=Nt(i,i,t),x=1/Math.max(u,1);let f=!r&&n?1:0;for(f;f<=u;f++){const q=Xt(l(x*f));s.push(e(q))}return s}}function ge({q:r,r:t,s:e}){return{q:r+1e-6,r:t+1e-6,s:e+-2e-6}}function Mr(r,t){return e=>{const n=r.q*(1-e)+t.q*e,s=r.r*(1-e)+t.r*e;return{q:n,r:s}}}function Cr(r,t,{includeSource:e=!0}={}){return function(n,s){const i=[];for(const o of $t(r)(n,s)){e&&i.push(o);for(const a of $t(t)(n,o))i.push(a)}return i}}I.E,I.N,I.S,I.W;function He(r){const{center:t,rotation:e=Zt.CLOCKWISE}=r;return function(n,s){const i=e.toUpperCase(),o=[];let{radius:a}=r;const l=K(a);let u;l?u=n(t).translate({q:a,s:-a}):(u=n(r.start??s),a=Nt(u,t,u));const{q:x,r:f,s:q}=wt(u,t);let h=n({q:x,r:f-a,s:q+a});if(i===Zt.CLOCKWISE)for(let _=0;_<6;_++)for(let O=0;O<a;O++){const{q:S,r:g}=ye[_];h=n({q:h.q+S,r:h.r+g}),o.push(h)}else for(let _=5;_>=0;_--)for(let O=0;O<a;O++){const{q:S,r:g}=ye[_];h=n({q:h.q-S,r:h.r-g}),o.push(h)}const m=l?!1:!r.start&&s,C=o.findIndex(_=>_.equals(u));return o.slice(C+(m?1:0)).concat(o.slice(0,C))}}const ye=[{q:1,r:0},{q:0,r:1},{q:-1,r:1},{q:-1,r:0},{q:0,r:-1},{q:1,r:-1}];function Or({radius:r,start:t,rotation:e}){return function(n,s){const i=t??s??[0,0],o=!t&&s?r:r+1;return Cr(Ae({start:t,direction:I.N,length:o}),He({center:i,rotation:e}))(n,s)}}var L,et,A,gt,te,ee,re;const Z=class Z{constructor(t,e=[]){M(this,A);M(this,L);M(this,et,new Map);if(t instanceof Z){Yt(this,L,c(t,L)),this.setHexes(t);return}Yt(this,L,t),this.setHexes(k(this,A,te).call(this,e))}static fromIterable(t){const e=t[Symbol.iterator]().next().value;if(!e)throw new TypeError(`Can't create grid from empty iterable: ${JSON.stringify(t)}`);return new Z(e.constructor,t)}static fromJSON({hexSettings:t,coordinates:e},n){if(n){const i=e.map(n),o=i.length>0?i[0].constructor:n({q:0,r:0},0,[{q:0,r:0}]).constructor;return new Z(o,i)}const s=Ee(t);return new Z(s,e.map(i=>new s(i)))}get size(){return c(this,et).size}get pixelWidth(){if(this.size===0)return 0;const{isPointy:t,width:e}=this.hexPrototype,n=this.toArray(),{0:s,length:i,[i-1]:o}=t?n.sort((a,l)=>l.s-a.s||a.q-l.q):n.sort((a,l)=>a.q-l.q);return o.x-s.x+e}get pixelHeight(){if(this.size===0)return 0;const{isPointy:t,height:e}=this.hexPrototype,n=this.toArray(),{0:s,length:i,[i-1]:o}=t?n.sort((a,l)=>a.r-l.r):n.sort((a,l)=>l.s-a.s||a.r-l.r);return o.y-s.y+e}[Symbol.iterator](){return c(this,et).values()}get hexPrototype(){return c(this,L).prototype}createHex(t){return new(c(this,L))(t)}getHex(t){const e=this.createHex(t);return c(this,et).get(e.toString())}hasHex(t){return c(this,et).has(t.toString())}setHexes(t){for(const e of t){const n=e instanceof ie?e:new(c(this,L))(e);k(this,A,gt).call(this,n)}return this}filter(t){var n;const e=new Z(c(this,L));for(const s of this)t(s)&&k(n=e,A,gt).call(n,s);return e}map(t){var n;const e=new Z(c(this,L));for(const s of this)k(n=e,A,gt).call(n,t(s));return e}traverse(t,{bail:e=!1}={}){var s;const n=new Z(c(this,L));for(const i of k(this,A,te).call(this,t)){const o=this.getHex(i);if(o)k(s=n,A,gt).call(s,o);else if(e)return n}return n}forEach(t){for(const e of this)t(e);return this}reduce(t,e){if(e===void 0){let s,i,o;for(const a of this)i=o,o=a,i&&(s=t(i,o));return s}let n=e;for(const s of this)n=t(n,s);return n}toArray(){return Array.from(this)}toJSON(){const{dimensions:t,orientation:e,origin:n,offset:s}=this.hexPrototype;return{hexSettings:{dimensions:t,orientation:e,origin:n,offset:s},coordinates:this.toArray()}}toString(){return`${this.constructor.name}(${this.size})`}pointToHex(t,{allowOutside:e=!0}={}){const n=xr(this.hexPrototype,t),s=this.getHex(n);return e?s??this.createHex(n):s}distance(t,e,{allowOutside:n=!0}={}){if(n)return Nt(this.hexPrototype,t,e);const s=this.getHex(t),i=this.getHex(e);if(!(!s||!i))return Nt(this.hexPrototype,s,i)}neighborOf(t,e,{allowOutside:n=!0}={}){const s=Qt(this.createHex(t),e),i=this.getHex(s);return n?i??s:i}};L=new WeakMap,et=new WeakMap,A=new WeakSet,gt=function(t){c(this,et).set(t.toString(),t)},te=function(t){return k(this,A,ee).call(this,t)?k(this,A,re).call(this,t):Array.isArray(t)&&k(this,A,ee).call(this,t[0])?k(this,A,re).call(this,$t(t)):t},ee=function(t){return cr(t)},re=function(t){return t(this.createHex.bind(this))};let Rt=Z;var pt,qt,bt;class Q extends Ee({dimensions:50}){constructor(){super(...arguments);M(this,pt,E(""));M(this,qt,E(!1));M(this,bt,E(!0))}get char(){return d(c(this,pt))}set char(e){p(c(this,pt),w(e))}get solid(){return d(c(this,qt))}set solid(e){p(c(this,qt),w(e))}get enabled(){return d(c(this,bt))}set enabled(e){p(c(this,bt),w(e))}static create(e,n){return e.solid=(n==null?void 0:n.solid)||!1,e.char=(n==null?void 0:n.char)||"",e}}pt=new WeakMap,qt=new WeakMap,bt=new WeakMap,G(Q,"scale",(e,n)=>{const s={x:e.reduce((i,o)=>i+o.x,0),y:e.reduce((i,o)=>i+o.y,0)};return s.x/=e.length,s.y/=e.length,e.map(i=>({x:s.x+(i.x-s.x)*n,y:s.y+(i.y-s.y)*n}))}),G(Q,"pointsToSVGString",e=>e.flatMap(n=>`${n.x},${n.y}`).join(" "));var Ar=St('<g class="svelte-y4ko70"><polygon class="display svelte-y4ko70"></polygon><text text-anchor="middle" class="svelte-y4ko70"> </text></g>');function Hr(r,t){ut(t,!0);const{x:e,y:n,corners:s,q:i,r:o}=t.hex,a=At(()=>t.hex.solid?.9:.76),l=At(()=>Q.scale(s,d(a)));var u=Ar();u.__mousedown=function(...h){const m=t.onclick;return m==null?void 0:m.apply(this,h)},R(u,"id",`${i}_${o}`);var x=N(u);J(()=>R(x,"points",Q.pointsToSVGString(d(l))));var f=T(x);R(f,"x",e),R(f,"y",n+10);var q=N(f);J(()=>vt(q,t.hex.char.toUpperCase())),J(()=>{ot(u,"selectable",t.hex.char!==""),ot(u,"selected",t.selectedHex===t.hex),ot(u,"solid",t.hex.solid),ot(u,"empty",t.hex.char===""),ot(u,"disabled",!t.hex.enabled)}),Jt("mouseenter",u,function(...h){const m=t.onmouseenter;return m==null?void 0:m.apply(this,h)},!1),F(r,u),lt()}Qe(["mousedown"]);class Pr{constructor(){G(this,"root");this.root=new ve("",!1)}insert(t){let e=this.root;for(let n=0;n<t.length;n++){const s=t[n];let i=e.children.find(o=>o.character===s);i||(i=new ve(s),e.children.push(i)),e=i}e.isEnd=!0}search(t){let e=this.root;for(let n=0;n<t.length;n++){const s=t[n];let i=e.children.find(o=>o.character===s);if(!i)return!1;e=i}return e.isEnd}}class ve{constructor(t,e=!1){G(this,"isEnd",!1);G(this,"character");G(this,"children",[]);this.character=t,this.isEnd=e}}const Tr=()=>{const r=new Pr;return new Promise(t=>fetch("https://adamdinhvu.github.io/wordsprawl/wordlist.txt").then(e=>(console.log("https://adamdinhvu.github.io/wordsprawl/wordlist.txt",e.ok),e.text())).then(e=>{e.split(/\r?\n/).forEach(s=>{r.insert(s)}),t(r)}))};let Pe;(async()=>Pe=await Tr())();const Nr=r=>r.length<3?!1:!!Pe.search(r);function Ft(r){p(r,r.v+1)}var Rr=["forEach","isDisjointFrom","isSubsetOf","isSupersetOf"],Ir=["difference","intersection","symmetricDifference","union"],xe=!1,at,Y,rt,kt,Te;const Lt=class Lt extends Set{constructor(e){super();M(this,kt);M(this,at,new Map);M(this,Y,E(0));M(this,rt,E(0));if(e){for(var n of e)super.add(n);c(this,rt).v=super.size}xe||k(this,kt,Te).call(this)}has(e){var n=super.has(e),s=c(this,at),i=s.get(e);if(i===void 0){if(!n)return d(c(this,Y)),!1;i=E(!0),s.set(e,i)}return d(i),n}add(e){return super.has(e)||(super.add(e),p(c(this,rt),super.size),Ft(c(this,Y))),this}delete(e){var n=super.delete(e),s=c(this,at),i=s.get(e);return i!==void 0&&(s.delete(e),p(i,!1)),n&&(p(c(this,rt),super.size),Ft(c(this,Y))),n}clear(){if(super.size!==0){super.clear();var e=c(this,at);for(var n of e.values())p(n,!1);e.clear(),p(c(this,rt),0),Ft(c(this,Y))}}keys(){return this.values()}values(){return d(c(this,Y)),super.values()}entries(){return d(c(this,Y)),super.entries()}[Symbol.iterator](){return this.keys()}get size(){return d(c(this,rt))}};at=new WeakMap,Y=new WeakMap,rt=new WeakMap,kt=new WeakSet,Te=function(){xe=!0;var e=Lt.prototype,n=Set.prototype;for(const s of Rr)e[s]=function(...i){return d(c(this,Y)),n[s].apply(this,i)};for(const s of Ir)e[s]=function(...i){d(c(this,Y));var o=n[s].apply(this,i);return new Lt(o)}};let It=Lt;var z;class me{constructor(t){M(this,z,E(w(new It)));c(this,z).v=w(new It(t||[]))}add(t){d(c(this,z)).add(t)}last(){return Array.from(d(c(this,z))).at(-1)}map(t){return Array.from(d(c(this,z))).map(t)}get length(){return d(c(this,z)).size}toArray(){return Array.from(d(c(this,z)))}SVGPoints(){const t=this.toArray();return t.map((e,n)=>{let s=e;return n!==this.length-1&&(s=t[n+1]),{x1:e.x+Math.random()*10,y1:e.y+Math.random()*10,x2:s.x+Math.random()*10,y2:s.y+Math.random()*10}})}[Symbol.iterator](){return d(c(this,z)).values()}toString(){return Array.from(d(c(this,z))).map(t=>t.char).join("")}toDebugString(){return Array.from(d(c(this,z))).map(t=>`[${t.char}: (${t.q}, ${t.r})]`).join(", ")}}z=new WeakMap;var ct;class kr{constructor(){M(this,ct,E(w([])));G(this,"add",t=>{if(t.length<3)return{ok:!1,word:t.toString(),detail:"tooShort"};if(this.chains.map(e=>e.toString()).includes(t.toString()))return{ok:!1,word:t.toString(),detail:"alreadyFound"};if(!Nr(t.toString()))return{ok:!1,word:t.toString(),detail:"notAWord"};this.chains.push(t);for(const e of t)e.solid=!0;return{ok:!0,word:t.toString()}});c(this,ct).v=w([])}get chains(){return d(c(this,ct))}set chains(t){p(c(this,ct),w(t))}}ct=new WeakMap;var Lr=St('<line fill="none" stroke-width="10" class="svelte-rnzsam"></line>'),zr=St("<g></g>");function Wr(r,t){ut(t,!0);const e=["be1e2d","fcb12e","1681c5","0f8549","b1a1ce","ee3675","6fcac7","cfbd2b","354ca0","f2718b","d280b6","ffd6a2","f47e49"],n=()=>"#"+e[Math.floor(Math.random()*e.length)];var s=$e(),i=se(s);mt(i,65,()=>t.chainManager.chains,xt,(o,a,l)=>{var u=zr();const x=At(n);mt(u,73,()=>H(a).SVGPoints(),xt,(f,q,h)=>{let m=()=>H(H(q)).x1,C=()=>H(H(q)).x2,_=()=>H(H(q)).y1,O=()=>H(H(q)).y2;var S=Lr();J(()=>{R(S,"x1",m()),R(S,"y1",_()),R(S,"x2",C()),R(S,"y2",O()),R(S,"stroke",d(x))}),F(f,S)}),F(o,u)}),F(r,s),lt()}var Yr=St('<circle r="20" class="svelte-1dvat3k"></circle>'),Dr=St("<g></g>");function Fr(r,t){ut(t,!0);var e=Dr();mt(e,73,()=>t.currentChain,xt,(n,s,i)=>{var o=Yr();J(()=>{R(o,"cx",H(s).x),R(o,"cy",H(s).y)}),F(n,o)}),F(r,e),lt()}var Ur=Et('<div class="container svelte-ui5uz9"><div><span class="svelte-ui5uz9"><h2 class="svelte-ui5uz9"> </h2> <p class="svelte-ui5uz9"> </p></span></div></div>');function jr(r,t){ut(t,!0);const e={tooShort:"is too short",alreadyFound:"has laready been found",notAWord:"is not in the word list"};var n=Ur(),s=N(n),i=N(s),o=N(i),a=N(o);J(()=>vt(a,t.response.word.toUpperCase()));var l=T(T(o,!0)),u=N(l);J(()=>vt(u,e[t.response.detail])),F(r,n),lt()}var Gr=Et(`<div class="container svelte-18qjah9"><svg width="100vw" height="90vh" viewBox="-370 -370 740 740"><style>text {
                font-size: xx-large;
                font-family: Arial;
                font-weight: bolder;
            }</style><!><!><g class="display svelte-18qjah9"><polygon points="38.97114317029974,-22.5 38.97114317029974,22.5 0,45 -38.97114317029974,22.5 -38.97114317029974,-22.5 0,-45" class="svelte-18qjah9"></polygon><text text-anchor="middle"> </text></g><!></svg></div> <!>`,1);function Br(r,t){var V,W,X,nt,$;ut(t,!0);let e=w(t.gridManager.grid);class n{constructor(){M(this,V,E(!1));M(this,W,E(w(e.getHex({r:0,s:0}))));M(this,X,E(!1));M(this,nt,E(w(new me)));M(this,$,E(w({x:0,y:0})))}get dragging(){return d(c(this,V))}set dragging(v){p(c(this,V),w(v))}get selectedHex(){return d(c(this,W))}set selectedHex(v){p(c(this,W),w(v))}get chaining(){return d(c(this,X))}set chaining(v){p(c(this,X),w(v))}get currentChain(){return d(c(this,nt))}set currentChain(v){p(c(this,nt),w(v))}get mousePosition(){return d(c(this,$))}set mousePosition(v){p(c(this,$),w(v))}}V=new WeakMap,W=new WeakMap,X=new WeakMap,nt=new WeakMap,$=new WeakMap;const s=new n;let i=E(void 0);const o=y=>{s.dragging&&(s.mousePosition=a(y.clientX,y.clientY))},a=(y,v)=>{var st;return new DOMPoint(y,v).matrixTransform((st=q.getScreenCTM())==null?void 0:st.inverse())},l=(y,v)=>{const j=a(y,v);return e.pointToHex({x:j.x,y:j.y},{allowOutside:!1})},u=y=>{if(y.button===0){if(s.chaining){s.chaining=!1,p(i,w(t.submitChain(s.currentChain)));let v=!0;for(const j of e)if(j.char!==""&&j.solid===!1){v=!1;break}v&&alert("You Win!")}if(s.dragging){s.dragging=!1;const v=l(y.clientX,y.clientY);if(!v||v.char!==""||!v.enabled)return;t.gridManager.moveHex(s.selectedHex,v)}}},x=y=>{s.chaining&&y.char!==""&&e.distance(y,s.currentChain.last())===1&&s.currentChain.add(y)},f=y=>{if(y.char!==""){if(y.solid){s.currentChain=new me([y]),s.chaining=!0;return}s.dragging=!0,s.selectedHex=y}};let q;var h=Gr();Jt("mouseup",ce,u,!1),Jt("mousemove",ce,o,!1);var m=se(h),C=N(m);tr(C,y=>q=y,()=>q);var _=N(C),O=T(_);Wr(O,{get chainManager(){return t.chainManager}});var S=T(O);mt(S,65,()=>e,xt,(y,v,j)=>{var st=At(()=>s.dragging?s.selectedHex:null);Hr(y,{get selectedHex(){return d(st)},get hex(){return H(v)},get gridManager(){return t.gridManager},onclick:Ne=>{f(H(v)),o(Ne)},onmouseenter:()=>x(H(v))})});var g=T(S),b=N(g),ft=T(b);R(ft,"x",0),R(ft,"y",10);var it=N(ft);J(()=>vt(it,s.selectedHex.char.toUpperCase()));var U=T(g);le(U,()=>s.chaining,y=>{Fr(y,{get currentChain(){return s.currentChain}})});var Mt=T(T(m,!0));le(Mt,()=>d(i),y=>{jr(y,{get response(){return d(i)},set response(v){p(i,w(v))}})}),J(()=>{R(g,"transform",`translate(${s.mousePosition.x}, ${s.mousePosition.y})`),ot(g,"show",s.dragging)}),F(r,h),lt()}const we={frequencyMap:{a:9,b:2,c:2,d:4,e:13,f:2,g:3,h:2,i:9,j:1,k:2,l:4,m:2,n:6,o:7,p:2,r:8,s:4,t:7,u:5,v:2,w:2,x:1,y:2,z:1},get totalLength(){return Object.values(this.frequencyMap).reduce((r,t)=>t+r,0)},randomChar(){function*r(n){let s=0;for(const[i,o]of Object.entries(n))s+=o,yield s}const t=Math.random()*this.totalLength,e=r(this.frequencyMap);return Object.keys(this.frequencyMap).find(n=>e.next().value>=t)},randomUnweightedLetter(){const r=[...Object.keys(this.frequencyMap)];return r[Math.floor(Math.random()*r.length)]}};var B,_t;class Jr{constructor(t,e,n=!1){M(this,B,E(w(new Rt(Q))));M(this,_t,E(w([])));if(c(this,B).v=w(new Rt(Q,Or({radius:4}))),c(this,B).v.forEach(i=>{Q.create(i)}),e){const i=Math.floor(e.length/2),o=Ae({start:{q:0,r:-i},length:e.length,direction:I.SE});for(const a of c(this,B).v.traverse(o,{bail:!0}))a.char=e[a.r+i],a.solid=!0}const s=He({center:{q:0,r:0},radius:4});for(const i of c(this,B).v.traverse(s))n?i.char=we.randomUnweightedLetter():i.char=we.randomChar();for(const i of c(this,B).v)i.char===""&&Math.random()>(100-t)/100&&(i.enabled=!1)}get grid(){return d(c(this,B))}set grid(t){p(c(this,B),w(t))}get gridArray(){return d(c(this,_t))}set gridArray(t){p(c(this,_t),w(t))}moveHex(t,e){let n,s;if(t instanceof Q)n=t;else if(n=this.grid.getHex(t),!n)throw new Error("Starting Hex Undefined!");if(e instanceof Q)s=e;else if(s=this.grid.getHex(e),!s)throw new Error("Final Hex Undefined!");if(n&&s)s.solid=n.solid,s.char=n.char,n.solid=!1,n.char="";else throw new Error("Either Starting or Final Hex is Undefined!")}}B=new WeakMap,_t=new WeakMap;var Kr=Et("<li> </li>"),Vr=Et(`<div class="container svelte-1r6qpw4"><div class="svelte-1r6qpw4"><p>words you've found</p> <ol></ol></div></div>`);function Xr(r,t){ut(t,!0);var e=Vr(),n=N(e),s=N(n),i=T(T(s,!0));mt(i,73,()=>t.chainManager.chains,xt,(o,a,l)=>{var u=Kr(),x=N(u);J(()=>vt(x,H(a).toString())),F(o,u)}),F(r,e),lt()}var Zr=Et("<!> <!>",1);function Qr(r){const t=new URL(window.location.href),e=t.searchParams.get("difficulty"),n=t.searchParams.get("word"),s=t.searchParams.get("hard"),i=e!==null?parseFloat(e):0,o=n!==null?n:"M",a=s!==null?!!s:!1,l=new Jr(i,o,a),u=new kr;var x=Zr(),f=se(x);Br(f,{gridManager:l,get submitChain(){return u.add},chainManager:u,$$legacy:!0});var q=T(T(f,!0));Xr(q,{chainManager:u,$$legacy:!0}),F(r,x)}er(Qr,{target:document.getElementById("app")});
